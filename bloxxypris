local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- ðŸ”¹ Create Main UI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "BloxyPrisonHub"
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- ðŸ”¹ Loading Screen
local LoadingFrame = Instance.new("Frame")
LoadingFrame.Size = UDim2.new(0, 400, 0, 120)
LoadingFrame.Position = UDim2.new(0.5, -200, 0.5, -60)
LoadingFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
LoadingFrame.BorderSizePixel = 0
LoadingFrame.BackgroundTransparency = 0.2
LoadingFrame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = LoadingFrame

local LoadingText = Instance.new("TextLabel")
LoadingText.Size = UDim2.new(1, 0, 0.6, 0)
LoadingText.Position = UDim2.new(0, 0, 0.2, 0)
LoadingText.Text = "Bloxy Prison Hub"
LoadingText.TextColor3 = Color3.fromRGB(255, 215, 0)
LoadingText.Font = Enum.Font.GothamBold
LoadingText.TextSize = 24
LoadingText.BackgroundTransparency = 1
LoadingText.Parent = LoadingFrame

local LoadingSubtext = Instance.new("TextLabel")
LoadingSubtext.Size = UDim2.new(1, 0, 0.3, 0)
LoadingSubtext.Position = UDim2.new(0, 0, 0.6, 0)
LoadingSubtext.Text = "Loading"
LoadingSubtext.TextColor3 = Color3.fromRGB(200, 200, 200)
LoadingSubtext.Font = Enum.Font.Gotham
LoadingSubtext.TextSize = 16
LoadingSubtext.BackgroundTransparency = 1
LoadingSubtext.Parent = LoadingFrame

-- Smooth loading animation
local dotCount = 0
local lastUpdate = tick()
local loadingConnection
loadingConnection = game:GetService("RunService").Heartbeat:Connect(function()
    local now = tick()
    if now - lastUpdate >= 0.5 then -- Update every 0.5 seconds instead of every frame
        lastUpdate = now
        dotCount = (dotCount % 3) + 1
        LoadingSubtext.Text = "Loading" .. string.rep(".", dotCount)
    end
end)

wait(2) -- Simulate loading time

loadingConnection:Disconnect()
TweenService:Create(LoadingFrame, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
wait(0.5)
LoadingFrame:Destroy()

-- ðŸ”¹ Key System
local KeyFrame = Instance.new("Frame")
KeyFrame.Size = UDim2.new(0, 400, 0, 250)
KeyFrame.Position = UDim2.new(0.5, -200, 0.5, -125)
KeyFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
KeyFrame.BackgroundTransparency = 0.2
KeyFrame.BorderSizePixel = 0
KeyFrame.Parent = ScreenGui

local KeyUICorner = Instance.new("UICorner")
KeyUICorner.CornerRadius = UDim.new(0, 8)
KeyUICorner.Parent = KeyFrame

local KeyTitle = Instance.new("TextLabel")
KeyTitle.Size = UDim2.new(1, 0, 0.2, 0)
KeyTitle.Position = UDim2.new(0, 0, 0.05, 0)
KeyTitle.Text = "ðŸ”‘ Authentication Required"
KeyTitle.TextColor3 = Color3.fromRGB(255, 215, 0)
KeyTitle.Font = Enum.Font.GothamBold
KeyTitle.TextSize = 20
KeyTitle.BackgroundTransparency = 1
KeyTitle.Parent = KeyFrame

local KeyBox = Instance.new("TextBox")
KeyBox.Size = UDim2.new(0.8, 0, 0.12, 0)
KeyBox.Position = UDim2.new(0.1, 0, 0.35, 0)
KeyBox.PlaceholderText = "Enter your key here..."
KeyBox.Text = ""
KeyBox.TextColor3 = Color3.fromRGB(255, 255, 255)
KeyBox.Font = Enum.Font.Gotham
KeyBox.TextSize = 16
KeyBox.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
KeyBox.BorderSizePixel = 0
KeyBox.Parent = KeyFrame

local KeyBoxCorner = Instance.new("UICorner")
KeyBoxCorner.CornerRadius = UDim.new(0, 4)
KeyBoxCorner.Parent = KeyBox

local SubmitButton = Instance.new("TextButton")
SubmitButton.Size = UDim2.new(0.8, 0, 0.12, 0)
SubmitButton.Position = UDim2.new(0.1, 0, 0.55, 0)
SubmitButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
SubmitButton.Text = "SUBMIT"
SubmitButton.TextColor3 = Color3.fromRGB(25, 25, 25)
SubmitButton.Font = Enum.Font.GothamBold
SubmitButton.TextSize = 16
SubmitButton.Parent = KeyFrame

local SubmitCorner = Instance.new("UICorner")
SubmitCorner.CornerRadius = UDim.new(0, 4)
SubmitCorner.Parent = SubmitButton

local CopyKeyButton = Instance.new("TextButton")
CopyKeyButton.Size = UDim2.new(0.8, 0, 0.12, 0)
CopyKeyButton.Position = UDim2.new(0.1, 0, 0.75, 0)
CopyKeyButton.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
CopyKeyButton.Text = "GET KEY"
CopyKeyButton.TextColor3 = Color3.fromRGB(255, 215, 0)
CopyKeyButton.Font = Enum.Font.GothamBold
CopyKeyButton.TextSize = 16
CopyKeyButton.Parent = KeyFrame

local CopyKeyCorner = Instance.new("UICorner")
CopyKeyCorner.CornerRadius = UDim.new(0, 4)
CopyKeyCorner.Parent = CopyKeyButton

-- ðŸ”¹ Main UI Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 500, 0, 500)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
MainFrame.BackgroundTransparency = 0.2
MainFrame.BorderSizePixel = 0
MainFrame.Visible = false
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 8)
MainCorner.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0.08, 0)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleBarCorner = Instance.new("UICorner")
TitleBarCorner.CornerRadius = UDim.new(0, 8, 0, 0)
TitleBarCorner.Parent = TitleBar

local TitleText = Instance.new("TextLabel")
TitleText.Size = UDim2.new(0.8, 0, 1, 0)
TitleText.Position = UDim2.new(0.1, 0, 0, 0)
TitleText.Text = "BLOXY PRISON HUB"
TitleText.TextColor3 = Color3.fromRGB(25, 25, 25)
TitleText.Font = Enum.Font.GothamBold
TitleText.TextSize = 20
TitleText.BackgroundTransparency = 1
TitleText.Parent = TitleBar

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0.08, 0, 0.6, 0)
CloseButton.Position = UDim2.new(0.9, 0, 0.2, 0)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(25, 25, 25)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
CloseButton.BorderSizePixel = 0
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 4)
CloseCorner.Parent = CloseButton

-- Tab System
local TabButtons = Instance.new("Frame")
TabButtons.Size = UDim2.new(1, 0, 0.08, 0)
TabButtons.Position = UDim2.new(0, 0, 0.08, 0)
TabButtons.BackgroundTransparency = 1
TabButtons.Parent = MainFrame

local ScriptsTab = Instance.new("TextButton")
ScriptsTab.Size = UDim2.new(0.3, 0, 1, 0)
ScriptsTab.Position = UDim2.new(0.05, 0, 0, 0)
ScriptsTab.Text = "SCRIPTS"
ScriptsTab.TextColor3 = Color3.fromRGB(255, 215, 0)
ScriptsTab.Font = Enum.Font.GothamBold
ScriptsTab.TextSize = 16
ScriptsTab.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
ScriptsTab.BorderSizePixel = 0
ScriptsTab.Parent = TabButtons

local ScriptsCorner = Instance.new("UICorner")
ScriptsCorner.CornerRadius = UDim.new(0, 4, 0, 0)
ScriptsCorner.Parent = ScriptsTab

-- Add Universal Tab
local UniversalTab = Instance.new("TextButton")
UniversalTab.Size = UDim2.new(0.3, 0, 1, 0)
UniversalTab.Position = UDim2.new(0.4, 0, 0, 0)
UniversalTab.Text = "UNIVERSAL"
UniversalTab.TextColor3 = Color3.fromRGB(255, 215, 0)
UniversalTab.Font = Enum.Font.GothamBold
UniversalTab.TextSize = 16
UniversalTab.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
UniversalTab.BorderSizePixel = 0
UniversalTab.Parent = TabButtons

local UniversalCorner = Instance.new("UICorner")
UniversalCorner.CornerRadius = UDim.new(0, 4, 0, 0)
UniversalCorner.Parent = UniversalTab

-- Content Area
local ContentFrame = Instance.new("ScrollingFrame")
ContentFrame.Size = UDim2.new(1, -20, 0.8, -10)
ContentFrame.Position = UDim2.new(0, 10, 0.18, 5)
ContentFrame.BackgroundTransparency = 1
ContentFrame.BorderSizePixel = 0
ContentFrame.ScrollBarThickness = 5
ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(255, 215, 0)
ContentFrame.Parent = MainFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 10)
UIListLayout.Parent = ContentFrame

-- Universal Content Frame (hidden by default)
local UniversalContent = Instance.new("ScrollingFrame")
UniversalContent.Size = UDim2.new(1, -20, 0.8, -10)
UniversalContent.Position = UDim2.new(0, 10, 0.18, 5)
UniversalContent.BackgroundTransparency = 1
UniversalContent.BorderSizePixel = 0
UniversalContent.ScrollBarThickness = 5
UniversalContent.ScrollBarImageColor3 = Color3.fromRGB(255, 215, 0)
UniversalContent.Visible = false
UniversalContent.Parent = MainFrame

local UniversalListLayout = Instance.new("UIListLayout")
UniversalListLayout.Padding = UDim.new(0, 10)
UniversalListLayout.Parent = UniversalContent

-- Universal Features Variables
local currentWalkSpeed = 16
local currentJumpPower = 50
local flySpeed = 50
local isFlying = false
local isNoclipping = false
local infiniteJump = false
local flyConnection, noclipConnection, jumpConnection

-- Function to apply speed after respawn
local function applySpeed()
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = currentWalkSpeed
            humanoid.JumpPower = currentJumpPower
        end
    end
end

-- Create Speed Slider
local speedSliderFrame = Instance.new("Frame")
speedSliderFrame.Size = UDim2.new(1, 0, 0, 80)
speedSliderFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
speedSliderFrame.BorderSizePixel = 0
speedSliderFrame.Parent = UniversalContent

local speedSliderCorner = Instance.new("UICorner")
speedSliderCorner.CornerRadius = UDim.new(0, 6)
speedSliderCorner.Parent = speedSliderFrame

local speedSliderTitle = Instance.new("TextLabel")
speedSliderTitle.Size = UDim2.new(0.8, 0, 0.3, 0)
speedSliderTitle.Position = UDim2.new(0.1, 0, 0.1, 0)
speedSliderTitle.Text = "WALKSPEED"
speedSliderTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
speedSliderTitle.Font = Enum.Font.GothamBold
speedSliderTitle.TextSize = 16
speedSliderTitle.TextXAlignment = Enum.TextXAlignment.Left
speedSliderTitle.BackgroundTransparency = 1
speedSliderTitle.Parent = speedSliderFrame

local speedSlider = Instance.new("Frame")
speedSlider.Size = UDim2.new(0.8, 0, 0.2, 0)
speedSlider.Position = UDim2.new(0.1, 0, 0.5, 0)
speedSlider.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
speedSlider.BorderSizePixel = 0
speedSlider.Parent = speedSliderFrame

local speedSliderInner = Instance.new("Frame")
speedSliderInner.Size = UDim2.new(currentWalkSpeed / 100, 0, 1, 0)
speedSliderInner.Position = UDim2.new(0, 0, 0, 0)
speedSliderInner.BackgroundColor3 = Color3.fromRGB(255, 215, 0)
speedSliderInner.BorderSizePixel = 0
speedSliderInner.Parent = speedSlider

local speedSliderValue = Instance.new("TextLabel")
speedSliderValue.Size = UDim2.new(0.2, 0, 0.3, 0)
speedSliderValue.Position = UDim2.new(0.7, 0, 0.1, 0)
speedSliderValue.Text = tostring(currentWalkSpeed)
speedSliderValue.TextColor3 = Color3.fromRGB(255, 215, 0)
speedSliderValue.Font = Enum.Font.GothamBold
speedSliderValue.TextSize = 16
speedSliderValue.BackgroundTransparency = 1
speedSliderValue.Parent = speedSliderFrame

-- Create Jump Power Slider
local jumpSliderFrame = Instance.new("Frame")
jumpSliderFrame.Size = UDim2.new(1, 0, 0, 80)
jumpSliderFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
jumpSliderFrame.BorderSizePixel = 0
jumpSliderFrame.Parent = UniversalContent

local jumpSliderCorner = Instance.new("UICorner")
jumpSliderCorner.CornerRadius = UDim.new(0, 6)
jumpSliderCorner.Parent = jumpSliderFrame

local jumpSliderTitle = Instance.new("TextLabel")
jumpSliderTitle.Size = UDim2.new(0.8, 0, 0.3, 0)
jumpSliderTitle.Position = UDim2.new(0.1, 0, 0.1, 0)
jumpSliderTitle.Text = "JUMP POWER"
jumpSliderTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
jumpSliderTitle.Font = Enum.Font.GothamBold
jumpSliderTitle.TextSize = 16
jumpSliderTitle.TextXAlignment = Enum.TextXAlignment.Left
jumpSliderTitle.BackgroundTransparency = 1
jumpSliderTitle.Parent = jumpSliderFrame

local jumpSlider = Instance.new("Frame")
jumpSlider.Size = UDim2.new(0.8, 0, 0.2, 0)
jumpSlider.Position = UDim2.new(0.1, 0, 0.5, 0)
jumpSlider.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
jumpSlider.BorderSizePixel = 0
jumpSlider.Parent = jumpSliderFrame

local jumpSliderInner = Instance.new("Frame")
jumpSliderInner.Size = UDim2.new(currentJumpPower / 200, 0, 1, 0)
jumpSliderInner.Position = UDim2.new(0, 0, 0, 0)
jumpSliderInner.BackgroundColor3 = Color3.fromRGB(0, 191, 255)
jumpSliderInner.BorderSizePixel = 0
jumpSliderInner.Parent = jumpSlider

local jumpSliderValue = Instance.new("TextLabel")
jumpSliderValue.Size = UDim2.new(0.2, 0, 0.3, 0)
jumpSliderValue.Position = UDim2.new(0.7, 0, 0.1, 0)
jumpSliderValue.Text = tostring(currentJumpPower)
jumpSliderValue.TextColor3 = Color3.fromRGB(0, 191, 255)
jumpSliderValue.Font = Enum.Font.GothamBold
jumpSliderValue.TextSize = 16
jumpSliderValue.BackgroundTransparency = 1
jumpSliderValue.Parent = jumpSliderFrame

-- Create Fly Button
local flyButtonFrame = Instance.new("Frame")
flyButtonFrame.Size = UDim2.new(1, 0, 0, 60)
flyButtonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
flyButtonFrame.BorderSizePixel = 0
flyButtonFrame.Parent = UniversalContent

local flyButtonCorner = Instance.new("UICorner")
flyButtonCorner.CornerRadius = UDim.new(0, 6)
flyButtonCorner.Parent = flyButtonFrame

local flyButtonHighlight = Instance.new("Frame")
flyButtonHighlight.Size = UDim2.new(0, 5, 1, 0)
flyButtonHighlight.Position = UDim2.new(0, 0, 0, 0)
flyButtonHighlight.BackgroundColor3 = Color3.fromRGB(255, 69, 0)
flyButtonHighlight.BorderSizePixel = 0
flyButtonHighlight.Parent = flyButtonFrame

local flyHighlightCorner = Instance.new("UICorner")
flyHighlightCorner.CornerRadius = UDim.new(0, 6, 0, 0)
flyHighlightCorner.Parent = flyButtonHighlight

local flyButtonTitle = Instance.new("TextLabel")
flyButtonTitle.Size = UDim2.new(0.7, 0, 1, 0)
flyButtonTitle.Position = UDim2.new(0.1, 0, 0, 0)
flyButtonTitle.Text = "FLY (Press E to toggle)"
flyButtonTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
flyButtonTitle.Font = Enum.Font.GothamBold
flyButtonTitle.TextSize = 16
flyButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
flyButtonTitle.BackgroundTransparency = 1
flyButtonTitle.Parent = flyButtonFrame

local flyToggleButton = Instance.new("TextButton")
flyToggleButton.Size = UDim2.new(0.2, 0, 0.6, 0)
flyToggleButton.Position = UDim2.new(0.75, 0, 0.2, 0)
flyToggleButton.Text = "OFF"
flyToggleButton.TextColor3 = Color3.fromRGB(25, 25, 25)
flyToggleButton.Font = Enum.Font.GothamBold
flyToggleButton.TextSize = 14
flyToggleButton.BackgroundColor3 = Color3.fromRGB(255, 69, 0)
flyToggleButton.BorderSizePixel = 0
flyToggleButton.Parent = flyButtonFrame

local flyToggleCorner = Instance.new("UICorner")
flyToggleCorner.CornerRadius = UDim.new(0, 4)
flyToggleCorner.Parent = flyToggleButton

-- Create Noclip Button
local noclipButtonFrame = Instance.new("Frame")
noclipButtonFrame.Size = UDim2.new(1, 0, 0, 60)
noclipButtonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
noclipButtonFrame.BorderSizePixel = 0
noclipButtonFrame.Parent = UniversalContent

local noclipButtonCorner = Instance.new("UICorner")
noclipButtonCorner.CornerRadius = UDim.new(0, 6)
noclipButtonCorner.Parent = noclipButtonFrame

local noclipButtonHighlight = Instance.new("Frame")
noclipButtonHighlight.Size = UDim2.new(0, 5, 1, 0)
noclipButtonHighlight.Position = UDim2.new(0, 0, 0, 0)
noclipButtonHighlight.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
noclipButtonHighlight.BorderSizePixel = 0
noclipButtonHighlight.Parent = noclipButtonFrame

local noclipHighlightCorner = Instance.new("UICorner")
noclipHighlightCorner.CornerRadius = UDim.new(0, 6, 0, 0)
noclipHighlightCorner.Parent = noclipButtonHighlight

local noclipButtonTitle = Instance.new("TextLabel")
noclipButtonTitle.Size = UDim2.new(0.7, 0, 1, 0)
noclipButtonTitle.Position = UDim2.new(0.1, 0, 0, 0)
noclipButtonTitle.Text = "NOCLIP (Press Q to toggle)"
noclipButtonTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
noclipButtonTitle.Font = Enum.Font.GothamBold
noclipButtonTitle.TextSize = 16
noclipButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
noclipButtonTitle.BackgroundTransparency = 1
noclipButtonTitle.Parent = noclipButtonFrame

local noclipToggleButton = Instance.new("TextButton")
noclipToggleButton.Size = UDim2.new(0.2, 0, 0.6, 0)
noclipToggleButton.Position = UDim2.new(0.75, 0, 0.2, 0)
noclipToggleButton.Text = "OFF"
noclipToggleButton.TextColor3 = Color3.fromRGB(25, 25, 25)
noclipToggleButton.Font = Enum.Font.GothamBold
noclipToggleButton.TextSize = 14
noclipToggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
noclipToggleButton.BorderSizePixel = 0
noclipToggleButton.Parent = noclipButtonFrame

local noclipToggleCorner = Instance.new("UICorner")
noclipToggleCorner.CornerRadius = UDim.new(0, 4)
noclipToggleCorner.Parent = noclipToggleButton

-- Create Infinite Jump Button
local jumpButtonFrame = Instance.new("Frame")
jumpButtonFrame.Size = UDim2.new(1, 0, 0, 60)
jumpButtonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
jumpButtonFrame.BorderSizePixel = 0
jumpButtonFrame.Parent = UniversalContent

local jumpButtonCorner = Instance.new("UICorner")
jumpButtonCorner.CornerRadius = UDim.new(0, 6)
jumpButtonCorner.Parent = jumpButtonFrame

local jumpButtonHighlight = Instance.new("Frame")
jumpButtonHighlight.Size = UDim2.new(0, 5, 1, 0)
jumpButtonHighlight.Position = UDim2.new(0, 0, 0, 0)
jumpButtonHighlight.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
jumpButtonHighlight.BorderSizePixel = 0
jumpButtonHighlight.Parent = jumpButtonFrame

local jumpHighlightCorner = Instance.new("UICorner")
jumpHighlightCorner.CornerRadius = UDim.new(0, 6, 0, 0)
jumpHighlightCorner.Parent = jumpButtonHighlight

local jumpButtonTitle = Instance.new("TextLabel")
jumpButtonTitle.Size = UDim2.new(0.7, 0, 1, 0)
jumpButtonTitle.Position = UDim2.new(0.1, 0, 0, 0)
jumpButtonTitle.Text = "INFINITE JUMP"
jumpButtonTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
jumpButtonTitle.Font = Enum.Font.GothamBold
jumpButtonTitle.TextSize = 16
jumpButtonTitle.TextXAlignment = Enum.TextXAlignment.Left
jumpButtonTitle.BackgroundTransparency = 1
jumpButtonTitle.Parent = jumpButtonFrame

local jumpToggleButton = Instance.new("TextButton")
jumpToggleButton.Size = UDim2.new(0.2, 0, 0.6, 0)
jumpToggleButton.Position = UDim2.new(0.75, 0, 0.2, 0)
jumpToggleButton.Text = "OFF"
jumpToggleButton.TextColor3 = Color3.fromRGB(25, 25, 25)
jumpToggleButton.Font = Enum.Font.GothamBold
jumpToggleButton.TextSize = 14
jumpToggleButton.BackgroundColor3 = Color3.fromRGB(138, 43, 226)
jumpToggleButton.BorderSizePixel = 0
jumpToggleButton.Parent = jumpButtonFrame

local jumpToggleCorner = Instance.new("UICorner")
jumpToggleCorner.CornerRadius = UDim.new(0, 4)
jumpToggleCorner.Parent = jumpToggleButton

-- Fly Function (Fixed)
local function activateFlying()
    if flyConnection then flyConnection:Disconnect() end
    
    local character = LocalPlayer.Character
    if not character then return end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if not humanoid then return end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart") or character:WaitForChild("HumanoidRootPart")
    if not rootPart then return end
    
    -- Create controls
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
    bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
    bodyVelocity.P = 1250
    
    local bodyGyro = Instance.new("BodyGyro")
    bodyGyro.MaxTorque = Vector3.new(4000, 4000, 4000)
    bodyGyro.P = 1250
    bodyGyro.CFrame = rootPart.CFrame
    
    bodyVelocity.Parent = rootPart
    bodyGyro.Parent = rootPart
    
    isFlying = true
    flyToggleButton.Text = "ON"
    TweenService:Create(flyToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 255, 0)}):Play()
    
    flyConnection = RunService.Heartbeat:Connect(function()
        if not isFlying or not character or not rootPart then
            if bodyVelocity then bodyVelocity:Destroy() end
            if bodyGyro then bodyGyro:Destroy() end
            return
        end
        
        local camera = workspace.CurrentCamera
        local direction = Vector3.new()
        
        -- Movement controls
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then
            direction = direction + (camera.CFrame.LookVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then
            direction = direction - (camera.CFrame.LookVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then
            direction = direction - (camera.CFrame.RightVector * flySpeed)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then
            direction = direction + (camera.CFrame.RightVector * flySpeed)
        end
        
        -- Vertical controls
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
            direction = direction + Vector3.new(0, flySpeed, 0)
        end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
            direction = direction - Vector3.new(0, flySpeed, 0)
        end
        
        -- Apply movement
        bodyVelocity.Velocity = direction
        bodyGyro.CFrame = camera.CFrame
    end)
end

local function deactivateFlying()
    isFlying = false
    if flyConnection then flyConnection:Disconnect() end
    
    local character = LocalPlayer.Character
    if character then
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if rootPart then
            for _, obj in pairs(rootPart:GetChildren()) do
                if obj:IsA("BodyVelocity") or obj:IsA("BodyGyro") then
                    obj:Destroy()
                end
            end
        end
    end
    
    flyToggleButton.Text = "OFF"
    TweenService:Create(flyToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 69, 0)}):Play()
end

-- Noclip Function (Fixed)
local function activateNoclip()
    if noclipConnection then noclipConnection:Disconnect() end
    
    isNoclipping = true
    noclipToggleButton.Text = "ON"
    TweenService:Create(noclipToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 255, 0)}):Play()
    
    noclipConnection = RunService.Stepped:Connect(function()
        if not isNoclipping then
            if noclipConnection then noclipConnection:Disconnect() end
            return
        end
        
        local character = LocalPlayer.Character
        if not character then return end
        
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end)
end

local function deactivateNoclip()
    isNoclipping = false
    if noclipConnection then noclipConnection:Disconnect() end
    
    local character = LocalPlayer.Character
    if character then
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
    
    noclipToggleButton.Text = "OFF"
    TweenService:Create(noclipToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 69, 0)}):Play()
end

-- Infinite Jump Function
local function toggleInfiniteJump()
    infiniteJump = not infiniteJump
    
    if infiniteJump then
        jumpToggleButton.Text = "ON"
        TweenService:Create(jumpToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 255, 0)}):Play()
        
        if jumpConnection then jumpConnection:Disconnect() end
        jumpConnection = UserInputService.JumpRequest:Connect(function()
            local character = LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end
        end)
    else
        jumpToggleButton.Text = "OFF"
        TweenService:Create(jumpToggleButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(138, 43, 226)}):Play()
        if jumpConnection then jumpConnection:Disconnect() end
    end
end

-- Speed Control Function
local function updateSpeed(value)
    currentWalkSpeed = math.floor(value)
    speedSliderValue.Text = tostring(currentWalkSpeed)
    speedSliderInner.Size = UDim2.new(currentWalkSpeed / 100, 0, 1, 0)
    applySpeed()
end

-- Jump Power Control Function
local function updateJumpPower(value)
    currentJumpPower = math.floor(value)
    jumpSliderValue.Text = tostring(currentJumpPower)
    jumpSliderInner.Size = UDim2.new(currentJumpPower / 200, 0, 1, 0)
    applySpeed()
end

-- Make speed slider draggable
speedSlider.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local connection
        connection = RunService.Heartbeat:Connect(function()
            local mousePos = UserInputService:GetMouseLocation().X
            local sliderPos = speedSlider.AbsolutePosition.X
            local sliderSize = speedSlider.AbsoluteSize.X
            local relativePos = math.clamp((mousePos - sliderPos) / sliderSize, 0, 1)
            local speedValue = math.floor(relativePos * 100)
            updateSpeed(speedValue)
        end)
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                connection:Disconnect()
            end
        end)
    end
end)

-- Make jump power slider draggable
jumpSlider.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        local connection
        connection = RunService.Heartbeat:Connect(function()
            local mousePos = UserInputService:GetMouseLocation().X
            local sliderPos = jumpSlider.AbsolutePosition.X
            local sliderSize = jumpSlider.AbsoluteSize.X
            local relativePos = math.clamp((mousePos - sliderPos) / sliderSize, 0, 1)
            local jumpValue = math.floor(relativePos * 200)
            updateJumpPower(jumpValue)
        end)
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                connection:Disconnect()
            end
        end)
    end
end)

-- Button Toggles
flyToggleButton.MouseButton1Click:Connect(function()
    if isFlying then
        deactivateFlying()
    else
        activateFlying()
    end
end)

noclipToggleButton.MouseButton1Click:Connect(function()
    if isNoclipping then
        deactivateNoclip()
    else
        activateNoclip()
    end
end)

jumpToggleButton.MouseButton1Click:Connect(function()
    toggleInfiniteJump()
end)

-- Key Binds
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.E then
        if isFlying then
            deactivateFlying()
        else
            activateFlying()
        end
    elseif input.KeyCode == Enum.KeyCode.Q then
        if isNoclipping then
            deactivateNoclip()
        else
            activateNoclip()
        end
    end
end)

-- Tab switching functionality
ScriptsTab.MouseButton1Click:Connect(function()
    ContentFrame.Visible = true
    UniversalContent.Visible = false
    TweenService:Create(ScriptsTab, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 215, 0), TextColor3 = Color3.fromRGB(25, 25, 25)}):Play()
    TweenService:Create(UniversalTab, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 50), TextColor3 = Color3.fromRGB(255, 215, 0)}):Play()
end)

UniversalTab.MouseButton1Click:Connect(function()
    ContentFrame.Visible = false
    UniversalContent.Visible = true
    TweenService:Create(UniversalTab, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 215, 0), TextColor3 = Color3.fromRGB(25, 25, 25)}):Play()
    TweenService:Create(ScriptsTab, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 50), TextColor3 = Color3.fromRGB(255, 215, 0)}):Play()
end)

-- Handle character respawns
LocalPlayer.CharacterAdded:Connect(function(character)
    task.wait(0.5) -- Small delay to ensure character is fully loaded
    applySpeed()
    if isFlying then activateFlying() end
    if isNoclipping then activateNoclip() end
    if infiniteJump then toggleInfiniteJump() end
end)

-- Initialize if character already exists
if LocalPlayer.Character then
    applySpeed()
end

-- Script Buttons (simplified without descriptions)
local function createScriptButton(name, color, scriptUrl)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Size = UDim2.new(1, 0, 0, 60) -- Reduced height
    buttonFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    buttonFrame.BorderSizePixel = 0
    buttonFrame.Parent = ContentFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = buttonFrame
    
    local buttonHighlight = Instance.new("Frame")
    buttonHighlight.Size = UDim2.new(0, 5, 1, 0)
    buttonHighlight.Position = UDim2.new(0, 0, 0, 0)
    buttonHighlight.BackgroundColor3 = color
    buttonHighlight.BorderSizePixel = 0
    buttonHighlight.Parent = buttonFrame
    
    local highlightCorner = Instance.new("UICorner")
    highlightCorner.CornerRadius = UDim.new(0, 6, 0, 0)
    highlightCorner.Parent = buttonHighlight
    
    local buttonTitle = Instance.new("TextLabel")
    buttonTitle.Size = UDim2.new(0.7, 0, 1, 0)
    buttonTitle.Position = UDim2.new(0.1, 0, 0, 0)
    buttonTitle.Text = name
    buttonTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    buttonTitle.Font = Enum.Font.GothamBold
    buttonTitle.TextSize = 18
    buttonTitle.TextXAlignment = Enum.TextXAlignment.Left
    buttonTitle.BackgroundTransparency = 1
    buttonTitle.Parent = buttonFrame
    
    local executeButton = Instance.new("TextButton")
    executeButton.Size = UDim2.new(0.2, 0, 0.6, 0)
    executeButton.Position = UDim2.new(0.75, 0, 0.2, 0)
    executeButton.Text = "EXECUTE"
    executeButton.TextColor3 = Color3.fromRGB(25, 25, 25)
    executeButton.Font = Enum.Font.GothamBold
    executeButton.TextSize = 14
    executeButton.BackgroundColor3 = color
    executeButton.BorderSizePixel = 0
    executeButton.Parent = buttonFrame
    
    local executeCorner = Instance.new("UICorner")
    executeCorner.CornerRadius = UDim.new(0, 4)
    executeCorner.Parent = executeButton
    
    -- Button animations
    executeButton.MouseEnter:Connect(function()
        TweenService:Create(executeButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(
                math.min(color.R * 255 + 30, 255)/255,
                math.min(color.G * 255 + 30, 255)/255,
                math.min(color.B * 255 + 30, 255)/255
            )
        }):Play()
    end)
    
    executeButton.MouseLeave:Connect(function()
        TweenService:Create(executeButton, TweenInfo.new(0.2), {
            BackgroundColor3 = color
        }):Play()
    end)
    
    executeButton.MouseButton1Click:Connect(function()
        executeButton.Text = "LOADING..."
        loadstring(game:HttpGet(scriptUrl))()
        wait(0.5)
        executeButton.Text = "EXECUTE"
    end)
end

-- Add scripts (simplified)
createScriptButton(
    "Corgiware Script", 
    Color3.fromRGB(128, 0, 128), 
    "https://pastebin.com/raw/DuWbmerF"
)

createScriptButton(
    "Fling Script", 
    Color3.fromRGB(255, 0, 0), 
    "https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt"
)

createScriptButton(
    "Prisonware Script", 
    Color3.fromRGB(255, 165, 0), 
    "https://raw.githubusercontent.com/Denverrz/scripts/master/PRISONWARE_v1.3.txt"
)

createScriptButton(
    "Tiger Admin Script", 
    Color3.fromRGB(255, 69, 0), 
    "https://raw.githubusercontent.com/Kohls-Admin-House/dump/main/Tiger%20Admin%20Source.lua"
)

createScriptButton(
    "Tbao Hub", 
    Color3.fromRGB(0, 191, 255), 
    "https://raw.githubusercontent.com/tbao143/thaibao/main/TbaohubPrisonLife"
)

-- ðŸ”¹ Key System Logic
SubmitButton.MouseButton1Click:Connect(function()
    if KeyBox.Text == "Key284" then
        -- Correct key entered
        TweenService:Create(KeyFrame, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -200, 1.5, -125)}):Play()
        wait(0.3)
        KeyFrame.Visible = false
        
        -- Show main UI with animation
        MainFrame.Position = UDim2.new(0.5, -250, 1.5, -250)
        MainFrame.Visible = true
        TweenService:Create(MainFrame, TweenInfo.new(0.5), {Position = UDim2.new(0.5, -250, 0.5, -250)}):Play()
        
        -- Success notification
        local successNotification = Instance.new("TextLabel")
        successNotification.Size = UDim2.new(0, 200, 0, 40)
        successNotification.Position = UDim2.new(0.5, -100, 0.9, 0)
        successNotification.Text = "âœ… Key Accepted!"
        successNotification.TextColor3 = Color3.fromRGB(0, 255, 0)
        successNotification.Font = Enum.Font.GothamBold
        successNotification.TextSize = 14
        successNotification.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
        successNotification.BackgroundTransparency = 0.2
        successNotification.Parent = ScreenGui
        
        local notifCorner = Instance.new("UICorner")
        notifCorner.CornerRadius = UDim.new(0, 4)
        notifCorner.Parent = successNotification
        
        wait(2)
        TweenService:Create(successNotification, TweenInfo.new(0.5), {BackgroundTransparency = 1, TextTransparency = 1}):Play()
        wait(0.5)
        successNotification:Destroy()
    else
        -- Incorrect key animation
        KeyBox.Text = ""
        KeyBox.PlaceholderText = "Incorrect key!"
        TweenService:Create(KeyBox, TweenInfo.new(0.1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, 3, true), {Position = UDim2.new(0.1, -5, 0.35, 0)}):Play()
        wait(0.1)
        TweenService:Create(KeyBox, TweenInfo.new(0.1), {Position = UDim2.new(0.1, 0, 0.35, 0)}):Play()
    end
end)

CopyKeyButton.MouseButton1Click:Connect(function()
    setclipboard("https://loot-link.com/s?ZR6plYqH")
    CopyKeyButton.Text = "COPIED!"
    TweenService:Create(CopyKeyButton, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(0, 255, 0)}):Play()
    wait(2)
    TweenService:Create(CopyKeyButton, TweenInfo.new(0.2), {TextColor3 = Color3.fromRGB(255, 215, 0)}):Play()
    CopyKeyButton.Text = "GET KEY"
end)

CloseButton.MouseButton1Click:Connect(function()
    TweenService:Create(MainFrame, TweenInfo.new(0.3), {Position = UDim2.new(0.5, -250, 1.5, -250)}):Play()
    wait(0.3)
    MainFrame.Visible = false
    KeyFrame.Visible = true
    KeyFrame.Position = UDim2.new(0.5, -200, 1.5, -125)
    TweenService:Create(KeyFrame, TweenInfo.new(0.5), {Position = UDim2.new(0.5, -200, 0.5, -125)}):Play()
end)
